<div ng-controller="ProjectDetailController" ng-init="init()">
	<ol class="breadcrumb taa-box-shadow-panel">
		<li>
			<a ui-sref="main.projectList"> <i class="glyphicon glyphicon-home"></i>
				トップ
			</a>
		</li>
		<li class="active">プロジェクト詳細</li>
	</ol>
	<div  class="panel ProjectDetail0100 taa-panel taa-box-shadow-panel" >
		<div class="panel-heading"> <i class="glyphicon glyphicon-pencil"></i>
			プロジェクト詳細
		</div>
		<div class="panel-body">
			<div class="row">
				<div class="col-sm-12">
					<div class="row">
						<form class="form-horizontal">
							<div class="col-md-6 col-sm-6">
								<div class="col-md-12">
									<div class="form-group">
										<label for="projectName" class="col-md-3 col-sm-3 control-label">
											プロジェクト名
											<i class="glyphicon glyphicon-asterisk required"></i>
										</label>
										<div class="col-md-9 col-sm-9">
											<input type="text" class="form-control" id="projectName" name="" value="" ng-model="m.projectName" placeholder="プロジェクト名"></div>
									</div>
								</div>
								<div class="col-md-12">
									<div class="form-group">
										<label for="systemName" class="col-md-3 col-sm-3 control-label">
											システム名
											<i class="glyphicon glyphicon-asterisk required"></i>
										</label>
										<div class="col-md-9 col-sm-9">
											<input type="text" class="form-control" id="systemName" name="" value="" ng-model="m.systemName" placeholder="システム名"></div>
									</div>
								</div>
								<div class="col-md-12">
									<div class="form-group">
										<label for="PJName" class="col-md-3 col-sm-3 control-label">
											PJ責任者
											<i class="glyphicon glyphicon-asterisk required"></i>
										</label>
										<div class="col-md-9 col-sm-9">
											<input type="text" class="form-control" id="PJName" name="" value="" ng-model="m.PJName" placeholder="PJ責任者"></div>
									</div>
								</div>
							</div>
							<div class="col-md-6 col-sm-6">
								<div class="col-md-6 com-sm-6">
									<div class="form-group">
										<label for="beginDate" class="col-md-3 col-sm-3 control-label">開始日</label>
										<div class="col-md-9 col-sm-9">
											<div id="reportrange" class="">
												<div taa-daterange ng-model="model.form.regisDate"
		                                		class="a-daterange-from form-control" href="javascript:void(0)"
		                                		id="fromDate" auto-focus="true"></div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-6 com-sm-6">
									<div class="form-group">
										<label for="endDate" class="col-md-3 col-sm-3 control-label">終了日</label>
										<div class="col-md-9 col-sm-9">
											<div id="reportrange" class="">
												<div taa-daterange ng-model="model.form.regisDate"
		                                		class="a-daterange-to form-control" href="javascript:void(0)"
		                                		id="toDate" auto-focus="true"></div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-12">
									<div class="form-group">
										<label for="Product" class="col-md-3 col-sm-3 control-label">開発ベンダー</label>
										<div class="col-md-9 col-sm-9">
											<input type="text" class="form-control" id="Product" name="" value="" ng-model="m.product" placeholder="開発ベンダー"></div>
									</div>
								</div>
								<div class="col-md-12">
									<div class="form-group">
										<label for="cost" class="col-md-3 col-sm-3 control-label">開発費(千円）</label>
										<div class="col-md-9 col-sm-9">
											<input type="text" class="form-control" id="cost" name="" value="" ng-model="m.cost" placeholder="開発費(千円）"></div>
									</div>

								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12">
					<div class="panel ProjectList0100 taa-panel-child taa-box-shadow-panel-child">
						<div class="panel-heading">
							メンバー一覧
							<div class="btn btn-primary glyphicon glyphicon-plus pull-right button-top-right"  ng-click="openModalChooseUser()"></div>
						</div>
						<div class="panel-body has-btn-primary">
							<div class="row">
								<div class="col-md-2 col-sm-4 ">
									<div class="form-inline form-group">
										<label for="idShow">表示件数:</label>
										<select name="mySelect" id="mySelect" ng-options="option for option in m.optionShow" ng-model="m.selectShowMemberList"></select>
									</div>
								</div>
								<div class="col-md-4 col-md-offset-6 col-sm-offset-2 col-sm-6 ">
									<div class="form-group">
										<input class="form-control" placeholder="検索..." type="text" id="idShearch" ng-model="m.search" />
									</div>
								</div>
							</div>
							<div class="table-responsive">
								<table class="table table-bordered table-hover table-striped table-responsive">
									<thead>
										<tr>
											<th>
												<a href="javscript:void(0)" ng-click="m.fieldSortMember = 'groupName'; m.fieldSortReserveMember = !m.fieldSortReserveMember;">
													グループ名
													<i class="glyphicon glyphicon-sort"></i>
												</a>
											</th>
											<th>
												<a href="javscript:void(0)" ng-click="m.fieldSortMember = 'userName'; m.fieldSortReserveMember = !m.fieldSortReserveMember;">
													ユーザー名
													<i class="glyphicon glyphicon-sort"></i>
												</a>
											</th>
											<th>
												<a href="javscript:void(0)" ng-click="m.fieldSortMember = 'lastName'; m.fieldSortReserveMember = !m.fieldSortReserveMember;">
													名前
													<i class="glyphicon glyphicon-sort"></i>
												</a>
											</th>
											<th>
												<a href="javscript:void(0)" ng-click="m.fieldSortMember = 'roleName'; m.fieldSortReserveMember = !m.fieldSortReserveMember;">
													ロール
													<i class="glyphicon glyphicon-sort"></i>
												</a>
											</th>
											<th class="text-center">
												<a href="javscript:void(0)" title="">削除</a>
											</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="(i, item) in m.memberList | filter : m.search | limitTo : m.selectShowMemberList | orderBy: m.fieldSortMember : m.fieldSortReserveMember track by $index" class="repeat-animated slide-right">
											<td>{{item.groupName}}</td>
											<td>{{item.userName}}</td>
											<td>{{item.lastName}} {{item.firstName}}</td>
											<td>
												<div>
													<select class="form-control" ng-model="item.roleId" ng-options="item.roleId as item.roleName for　item in m.listRole" ng-change="changeRoleMember(item)"></select>
												</div>
											</td>
											<td class="text-center">
												<div class="action-btn" ng-click="removeMember(i, item)">
													<i class="glyphicon glyphicon-trash"></i>
												</div>
											</td>
										</tr>

									</tbody>
								</table>
							</div>
							<div class="row" ng-if="m.memberList.length >
								m.selectShowMemberList">
								<div class="col-sm-12">
									<label>{{m.memberList.length}} 件中 1 から {{m.selectShowMemberList}} まで表示</label>

									<div class="pull-right">
										<uib-pagination total-items="m.memberList.length" ng-model="m.curentPage" force-ellipses="true" class="pagination-sm" boundary-links="true" num-pages="numPages"></uib-pagination>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<div class="form-group">
						<div type="button" class="btn btn-primary">保存</div>
						<a ui-sref="main.projectList" class="btn btn-warning">キャンセル</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- modal choose user -->
	<script type="text/ng-template" id="modalChooseUser.html">
		<div class="modal-header border-bottom">
			<button type="button" class="close" ng-click="$dismiss('cancel')">
				<span aria-hidden="true">&times;</span>
			</button>
			<h4 class="modal-title">
				<i class="glyphicon glyphicon-th-list"></i>
				メンバー追加
			</h4>
		</div>
		<div class="model-body">
			<div class="panel ">
				<div class="panel-body">
					<div class="row">
						<div class="col-md-2 col-sm-4 ">
							<div class="form-inline form-group">
								<label for="idShow">表示件数:</label>
								<select name="mySelect" id="mySelect" ng-options="option for option in m.optionShow" ng-model="m.selectShowUserList"></select>
							</div>
						</div>
						<div class="col-md-4 col-md-offset-6 col-sm-offset-2 col-sm-6 ">
							<div class="form-group">
								<input class="form-control" placeholder="検索..." type="text" id="idShearch" ng-model="m.searchUser" />
							</div>
						</div>
					</div>
					<div class="table-responsive">
						<table class="table table-bordered table-hover table-striped table-responsive">
							<thead>
								<tr>
									<th class="table-checkbox text-center">
										<a href="javscript:void(0)">#</a>
									</th>
									<th>
										<a href="javscript:void(0)" ng-click="m.fieldSortUser = 'userName'; m.fieldSortReserveUser = !m.fieldSortReserveUser;">
											ユーザー名
											<i class="glyphicon glyphicon-sort"></i>
										</a>
									</th>
									<th>
										<a href="javscript:void(0)" ng-click="m.fieldSortUser = 'lastName'; m.fieldSortReserveUser = !m.fieldSortReserveUser;">
											名前
											<i class="glyphicon glyphicon-sort"></i>
										</a>
									</th>
									<th>
										<a href="javscript:void(0)" ng-click="m.fieldSortUser = 'roleName'; m.fieldSortReserveUser = !m.fieldSortReserveUser;">ロール名<i class="glyphicon glyphicon-sort"></i></a>
									</th>
								</tr>
							</thead>
							<tbody>
								<tr  ng-repeat="(i, item) in m.userList | filter : m.searchUser | limitTo : m.selectShowUserList | orderBy: m.fieldSortUser : m.fieldSortReserveUser track by $index" class="repeat-animated slide-right">
									<td class="table-checkbox label-checkbox text-center">
										<label >
											<input type="checkbox" ng-model="item.registered" ng-change="clickCheckbox(item);">
											<span class="checkbox-material">
												<span class="check"></span>
											</span>
										</label>
									</td>
									<td ng-click="openModalChooseRole(item)">{{item.userName}}</td>
									<td ng-click="openModalChooseRole(item)">{{item.lastName}} {{item.firstName}}</td>
									<td ng-click="openModalChooseRole(item)">{{item.roleName}}</td>
								</tr>

							</tbody>
						</table>
					</div>
					<div class="row" ng-if="m.userList.length >
						m.selectShowUserList">
						<div class="col-sm-12">
							<label>{{m.userList.length}} 件中 1 から {{m.selectShowUserList}} まで表示</label>

							<div class="pull-right">
								<uib-pagination total-items="m.userList.length" ng-model="m.curentPageUser" force-ellipses="true" class="pagination-sm" boundary-links="true" num-pages="numPages"></uib-pagination>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="applyAddUser()">OK</button>
			<button type="button" class="btn btn-warning" data-dismiss="modal" ng-click="$dismiss('cancel');">キャンセル</button>
		</div>
	</script>
	<!-- end modal choose user -->
	<!-- modal choose role -->
	<script type="text/ng-template" id="modalChooseRole.html">
		<div class="modal-header border-bottom">
			<button type="button" class="close" ng-click="closeChooseRole()" >
				<span aria-hidden="true">&times;</span>
			</button>
			<h4 class="modal-title">
				<i class="glyphicon glyphicon-th-list"></i>
				ロール設定
			</h4>
		</div>
		<div class="modal-body">
			<div class="row">
				<div class="col-sm-12">
					<div class="form-group">
						<label for="roleModal">ユーザーのロールを選択してください。</label>
						<select class="form-control" id="roleModal" ng-model="m.userSelected.roleId" ng-options="item.roleId as item.roleName for　item in m.listRole" ng-change="chooseRole()"></select>
					</div>
				</div>
			</div>
		</div>
	</script>
	<!-- end modal choose role -->
</div>